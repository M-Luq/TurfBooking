<div class="change-credentials-container">
  <h2>Change Password</h2>
  <form #credentialsForm="ngForm" (ngSubmit)="onSubmit(credentialsForm)">
      <div class="form-group">
          <label for="newPassword">New Password</label>
          <input type="password" id="newPassword" name="newPassword" [(ngModel)]="newPassword" required minlength="8">
          @if (credentialsForm.controls.hasOwnProperty('newPassword') && credentialsForm.controls['newPassword'].invalid && credentialsForm.controls['newPassword'].touched) {
              <div class="error-message text-danger">
                  @if (credentialsForm.controls['newPassword'].errors?.['required']) {
                      <div>New password is required.</div>
                  }
                  @if (credentialsForm.controls['newPassword'].errors?.['minlength']) {
                      <div>Password must be at least 8 characters.</div>
                  }
              </div>
          }
      </div>

      <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <input type="password" id="confirmPassword" name="confirmPassword" [(ngModel)]="confirmPassword" required minlength="8">
          @if (credentialsForm.controls.hasOwnProperty('confirmPassword') && credentialsForm.controls['confirmPassword'].invalid && credentialsForm.controls['confirmPassword'].touched) {
              <div class="error-message text-danger">
                  @if (credentialsForm.controls['confirmPassword'].errors?.['required']) {
                      <div>Confirm password is required.</div>
                  }
                  @if (credentialsForm.controls['confirmPassword'].errors?.['minlength']) {
                      <div>Password must be at least 8 characters.</div>
                  }
              </div>
          }
          @if (passwordMismatch && credentialsForm.controls['confirmPassword'].touched) {
              <div class="error-message text-danger">Passwords do not match.</div>
          }
      </div>

      <button type="submit" [disabled]="credentialsForm.invalid || passwordMismatch">Change Password</button>
      @if (errorMessage) {
          <div class="error-message">{{ errorMessage }}</div>
      }
      @if (successMessage) {
          <div class="success-message">{{ successMessage }}</div>
      }
  </form>
</div>